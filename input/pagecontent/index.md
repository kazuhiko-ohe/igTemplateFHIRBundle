<span style="color: black; font-size: 120%;">パッケージ（tgzファイル）のダウンロードは上部メニューから可能です。</span><BR><BR>
<span style="color: blue; font-size: 120%;">本実装ガイドに関する質問やコメント（要望等を含む）は、以下のGoogleフォームから投稿してください。投稿にあたっては、Googleフォーム冒頭の説明をお読みいただき、了解された場合のみ投稿くださるようお願いします。</span>
<span style="color: blue; font-size: 150%;">[質問・コメント投稿フォームへ](https://forms.gle/7xVxoPWvk1fV7Sdu8)</span>

### 電子カルテ情報共有サービス（３文書６情報作成・送信）のためのFHIR実装ガイド
 <span style="color: red; font-size: 120%;"><<注意：このIGは協議中の暫定的な内容が含まれます。リソースのProfileも暫定版です。内容は間違いや暫定情報を含むことがあります。お気づきの点は上部に記載のGoogleフォームからお知らせをお願いします。>></span>
  <span style="color: black; font-size: 120%;"><<本実装ガイドは、令和２年度厚⽣労働科学特別研究事業「診療情報提供書, 電⼦処⽅箋等の電⼦化医療⽂書の相互運⽤性確保のための標準規格の開発研究」、令和３−４年度同「次世代の医療情報の標準規格への改定等に関する研究」、日本医療情報学会NeXERS課題研究会「FHIR日本実装検討WG」活動、およびそれに関連した後続の自主的作業として作成されています。>></span>
<br>

#### このImplementationガイド(IG)の目的：

厚生労働省が定めるいわゆる「３文書6情報」で使用されるFHIRリソースについてのプロファイルを定義する実装ガイドである。また、6情報を「電子カルテ情報共有サービス」に送信する際のBundle仕様や、送信した情報を同定するための識別子に関する仕様もここで定めている。
ただし、3文書（健診結果報告書、診療情報提供書、退院時サマリー）の文書ごとのFHIR実装ガイドは、以下で記載されている。


  -  [FHIR厚生労働省標準規格の資料] (https://std.jpfhir.jp/)
     - HS037　健康診断結果報告書HL7FHIR記述仕様 第１版
     - HS038　診療情報提供書HL7FHIR記述仕様 第１版
     - HS039　退院時サマリーHL7FHIR記述仕様

本実装ガイドは、FHIR R4.0.1に従い、JP-Core V1.1.xからの派生プロファイルの実装ガイドとして作成されている。従って、本IGに記述されていないことについては、JP-Core V1.1.xを参照していただきたい。

#### 想定する運用形態
1. Push形態：
臨床情報を格納しているサーバが、あらかじめ決められた期間や条件を満たす臨床情報について、あらかじめ決められたタイミンで、定められたデータ種別のデータを、別のシステムに送信する（Push方式）形態。<br>
３文書６情報を医療機関から「電子カルテ情報共有サービス」に送信するのはこの形態である。
<br>
この形態において、サーバが送信時に作成するリソース・インスタンスが従うべきプロファイルが本IGで説明される。<br>
この形態では、複数のリソース・インスタンスのセットを一括して送信するときには、複数のリソースインスタンスを格納したひとつのBundleリソースタイプのデータとして送信する仕様を本実装ガイドで定める。

1. Pull形態：
FHIRに準拠した臨床情報を必要とするクライアントシステムが、FHIR REST APIに従って、あるFHIRリソースタイプのデータ（リソース・インスタンス）を臨床データを保有するサーバに要求し、サーバからのレスポンスとしてFHIR規格に従ったデータを受け取る形態。<br>
この形態において、クライアントが受け取るリソースが従うべきプロファイルが本IGで説明される。<br>
この形態では、複数のリソース・インスタンスのセットを受け取るときには、FHIR REST APIでの仕様にもとづき、複数のリソース・インスタンスを格納したひとつのBundleリソースタイプのデータとして返される。

```
[用語説明]　FHIRリソース：　FHIRでは医療情報は、リソースというひとまとまりのデータ項目を集めた構造的なデータとして記述される。
プログラミング言語でいう構造体のようなもので、メソッドのないClassのような概念に相当するともいえる。患者基本情報のPatientリソース、
検査結果のObservationリソースなど、100種類以上のリソースが定義されている。それぞれのリソースの構造（どういうデータタイプのどんな
要素から構成されているか）を定義しているのがProfile（プロファイル）である。
Profile自体もひとつのリソースである（StructureDefinitionリソース）。リソースの種類のことをリソースタイプと呼ぶ。
```
```
[用語説明]　リソース・インスタンス：　リソース（のProfile）に従って記述されたひとつひとつの実際のデータ（実体）のこと。
　　例：患者、田中太郎さんの患者基本情報をPatientリソースに従って記述したデータは、田中太郎さんのPatientリソース・インスタンスである。
```
#### 主要な情報種別の範囲：
* 2023年度時点で厚生労働省が提示する「６情報」と使用するFHIRリソースタイプ（４タイプ）
<br>
  * [アレルギー情報と薬剤禁忌情報　AllergyIntoleranceリソース][JP_AllergyIntolerance_eCS]
  * [傷病名情報	Conditionリソース][JP_Condition_eCS]
  * [検査結果情報（注⁂）と感染症情報　Observationリソース][JP_Observation_LabResult_eCS] （注⁂　救急時に有用な検査、生活習慣病関連の検査）
  * [処方依頼情報　MedicationRequestリソース][JP_MedicationRequest_eCS]
　<br><br>
アレルギー情報と薬剤禁忌情報は、別に説明するように、同じプロファイルに従うAllergyIntoleranceリソースタイプで記述され、category要素とcriticality要素に設定される値の組み合わせにもとづいて受信側で区別される。<br>
また検査結果情報と感染症情報についても同様に、同じプロファイルに従うObservationリソースタイプで記述され、コード化された項目情報の記述にもとづいて受信側で区別される。
<br>
また、処方依頼情報には当面、注射点滴手法によるものは含まれない。ただし、処方箋によって処方されるものは含まれる（自己注射剤など）。
<br>

* <span style="color: blue;">[v0.9.7追記] なお、処方依頼情報は、６情報のひとつとして単独で（２文書に含まれない形で）電子カルテ情報共有サービスに送信されることはない。しかし、診療情報提供書、退院時サマリーの２文書に処方の内容を記述するために使用され、２文書の情報に埋め込まれて電子カルテ情報共有サービスに送信されるため、その場合には本仕様（電子カルテ情報共有サービスに送信する場合の仕様）にもとづいて記述される必要がある。
</span> 
<br><br>

* 上記のリソースから参照される関連情報<br>
　上記6情報から、その要素情報として参照されるリソースタイプを以下に示す。<span style="color: blue;">[v0.9.7追記] ここに記載されないリソースタイプの情報も２文書ではそれぞれの仕様に従い使用可能である。</span>

  1. <span style="color: blue;">[v0.9.7追記]  [患者情報	Patientリソース][JP_Patient_eCS]　　</span>
  1.  [外来受診・入院歴情報	Encounterリソース][JP_Encounter_eCS]
  1.  [医療者情報　Practitionerリソース][JP_Practitioner_eCS]
  1.  [サービス依頼（オーダ）情報　ServiceRequestリソース][JP_ServiceRequest]　（作成中）
  1.  [検査検体情報	Sepecimenリソース][JP_Specimen]  （作成中）

  <span style="color: blue;">[v0.9.7追記]上記のうち、患者情報以外のリソースは、6情報では、埋め込みリソース（containedリソース）の形で記述される。患者情報のリソースはBundleリソースのひとつのentryとして記述され、６情報からは参照の形をとる。</span>
  <br>

- 3文書（診療情報提供書、退院時サマリー、健診結果報告書）に含まれる6情報に該当する情報の記述方法
　3文書の仕様書に記載されている6情報に該当する情報は、本実装ガイドに従い記述するものとする。<br>
  「電子カルテ情報共有サービス」では、3文書データは文書として取り扱われるとともに、これらの文書中に記述されている６情報に該当する情報は取り出され、６情報として送信されたのと同様に管理される。したがって、6情報を電子カルテ情報共有サービスに送信するのと同じ仕様で記述しなければならない。<br>
  **★注意**：3文書の仕様書に記載されている6情報に該当する情報の仕様が、本実装ガイドと異なっているのは、本実装ガイドのほうがあとで策定されたためである。今後、3文書の仕様書は本実装ガイドに合わせて修正される予定である。したがって、現時点で両者に相違がある場合には、本実装ガイドの仕様を優先するものとする。

- 3文書に含まれる6情報以外の情報の記載と取り扱い
  3文書に含まれる、6情報以外の情報種別のリソースは、仕様書に従い記述して構わない。<br>
  「電子カルテ情報共有サービス」では、3文書中に記述されている６情報以外の情報種別のリソースは抽出されない。


#### 埋め込みリソースの取り扱い（Contained リソース）
 
FHIRでは、リソースの要素（例えば患者情報を記述するsubject要素）から参照されるリソースをcontained要素に格納することで、すべての参照される情報も包含する（埋め込む）ことができる。これを「contain する」といい、この方法でリソースの用途に埋め込み記述されるリソースをContainedリソース（正確にはContainされたリソース）と呼ぶ。Containedリソースは、そのリソースタイプを通常のリソースとして記述する場合に比べて、いくつかの制限があり、例えばContainedリソースをさらに埋め込むことはできない。
[https://www.hl7.org/fhir/references.html](https://www.hl7.org/fhir/references.html) （2.1.3.0.10 節参照）


### ６情報送信に関するFHIR仕様

<A href="core6spec.html">「電子カルテ情報共有サービスに医療機関から送信するFHIR仕様について」にジャンプ</a>


{% include markdown-link-references.md %}
